(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{237:function(e,t,n){},420:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(32),s=n.n(c),i=n(48),o=n(66),u=(n(237),n(14)),l=n(31),d=n(224),p=function(){return Object(o.b)()},h=o.c,f=function(e){var t=Object(r.useState)(e),n=Object(l.a)(t,2),a=n[0],c=n[1],s=function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)};return{img:a,setImg:c,handleChange:function(e){"done"===e.file.status&&s(e.file.originFileObj,(function(e){c(e)}))},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||d.b.error("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 JPG \u0430\u0431\u043e PNG \u0444\u0430\u0439\u043b!");var n=e.size/1024/1024<2;return n||d.b.error("\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0454 \u0432\u0430\u0436\u0438\u0442\u0438 \u043d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 2MB!"),t&&n},dummyRequest:function(e){var t=e.onSuccess;setTimeout((function(){t&&t("ok")}),0)}}},j=function(e,t){var n=p();Object(r.useEffect)((function(){e&&(d.b.error(e),t&&n(t(null)))}),[e,n,t])},b=function(e,t,n){var a=p();Object(r.useEffect)((function(){t&&(d.b.success(e),n&&a(n(null)))}),[t,a,n,e])},g=n(148),x=n(226),O=n(75),m=n(426),v=n(4),C=function(e){var t=e.children;return Object(v.jsx)("div",{className:"w-18 flex justify-center items-center p-2",children:t})},y=function(e){var t=e.channel,n=Object(u.i)().channelId;return Object(v.jsx)(i.b,{to:"channel/".concat(t.id),className:n&&+n===t.id?"block bg-blue-100 rounded-lg":"block",children:Object(v.jsx)(C,{children:Object(v.jsx)(O.a,{title:t.name,placement:"right",children:Object(v.jsx)(m.a,{size:48,src:t.photo,children:t.name[0].toUpperCase()})})})})},E=n(73),w=function(e){var t=e.Icon,n=e.onClick;return Object(v.jsx)(C,{children:Object(v.jsx)(E.a,{icon:Object(v.jsx)(t,{className:"text-2xl"}),shape:"circle",className:"w-12 h-12",onClick:n})})},S=n(60),I=n(29),k=n(17),F=n.n(k),N=n(30),P=n(213),T=n.n(P).a.create({baseURL:"https://kpi-network.herokuapp.com/api/",withCredentials:!0}),U=function(e){return T.get("user/".concat(e))},q=function(e){return T.put("user",Object(I.a)({},e))},R=function(e,t){return T.get("user/channels?page=".concat(e,"&count=").concat(t))},H=function(e,t){return T.get("user/contacts?page=".concat(e,"&count=").concat(t))},V=n(24),z=Object(V.b)("user/fetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,U(t);case 4:if(!(a=e.sent).data.errors[0]){e.next=7;break}return e.abrupt("return",r(a.data.errors[0]));case 7:return e.abrupt("return",a.data);case 10:if(e.prev=10,e.t0=e.catch(1),!(i=e.t0).response||401!==i.response.status){e.next=15;break}return e.abrupt("return",r(i.response.data.errors[0]));case 15:return e.abrupt("return",r(null!==(c=null===(s=i.response)||void 0===s?void 0:s.statusText)&&void 0!==c?c:"Some error occured"));case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(V.b)("user/updated",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,a=n.getState,c=a(),e.prev=2,e.next=5,q(t);case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",r(s.data.errors[0]));case 8:return e.abrupt("return",Object(I.a)(Object(I.a)({},c.user.user),t));case 11:if(e.prev=11,e.t0=e.catch(2),!(u=e.t0).response||401!==u.response.status){e.next=16;break}return e.abrupt("return",r(u.response.data.errors[0]));case 16:return e.abrupt("return",r(null!==(i=null===(o=u.response)||void 0===o?void 0:o.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),M=Object(V.b)("user/channels_fetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.portion,a=t.count,c=n.rejectWithValue,e.prev=2,e.next=5,R(r,a);case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",c(s.data.errors[0]));case 8:return e.abrupt("return",s.data);case 11:if(e.prev=11,e.t0=e.catch(2),!(u=e.t0).response||401!==u.response.status){e.next=16;break}return e.abrupt("return",c(u.response.data.errors[0]));case 16:return e.abrupt("return",c(null!==(i=null===(o=u.response)||void 0===o?void 0:o.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),W=Object(V.b)("user/contacts_fetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.portion,a=t.count,c=n.rejectWithValue,e.prev=2,e.next=5,H(r,a);case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",c(s.data.errors[0]));case 8:return e.abrupt("return",s.data);case 11:if(e.prev=11,e.t0=e.catch(2),!(u=e.t0).response||401!==u.response.status){e.next=16;break}return e.abrupt("return",c(u.response.data.errors[0]));case 16:return e.abrupt("return",c(null!==(i=null===(o=u.response)||void 0===o?void 0:o.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(V.c)({name:"user",initialState:{user:null,isFetching:!1,fetchingError:null,isUpdating:!1,updateSucceed:!1,updatingError:null,channels:[],channelsCount:10,channelsLastPortion:0,channelsTotal:null,contacts:[],contactsCount:5,contactsLastPortion:0,contactsTotal:null,isChannelsFetching:!1,channelsFetchingError:null,isContactsFetching:!1,contactsFetchingError:null},reducers:{addChannel:function(e,t){e.channels.push(t.payload)},addUserContact:function(e,t){e.contacts.push(t.payload)},removeUserContact:function(e,t){e.contacts=e.contacts.filter((function(e){return e.id!==t.payload}))},userChanged:function(e,t){e.user=t.payload},userChannelsChanged:function(e,t){e.channels=t.payload},userContactsChanged:function(e,t){e.contacts=t.payload},channelsFetchingErrorChanged:function(e,t){e.channelsFetchingError=t.payload},updateSucceedChanged:function(e,t){e.updateSucceed=t.payload},updatingErrorChanged:function(e,t){e.updatingError=t.payload}},extraReducers:function(e){e.addCase(z.pending,(function(e){e.isFetching=!0})).addCase(z.fulfilled,(function(e,t){e.isFetching=!1,e.user=t.payload.data})).addCase(z.rejected,(function(e,t){var n;e.fetchingError=null!==(n=t.payload)&&void 0!==n?n:null,e.isFetching=!1})).addCase(L.pending,(function(e){e.isUpdating=!0})).addCase(L.fulfilled,(function(e,t){e.isUpdating=!1,e.updateSucceed=!0,e.user=t.payload})).addCase(L.rejected,(function(e,t){var n;e.updatingError=null!==(n=t.payload)&&void 0!==n?n:null,e.isUpdating=!1})).addCase(M.pending,(function(e){e.isChannelsFetching=!0})).addCase(M.fulfilled,(function(e,t){e.isChannelsFetching=!1,e.channels=[].concat(Object(S.a)(e.channels),Object(S.a)(t.payload.data.items)),e.channelsLastPortion+=1,e.channelsTotal=t.payload.data.total})).addCase(M.rejected,(function(e,t){var n;e.channelsFetchingError=null!==(n=t.payload)&&void 0!==n?n:null,e.isChannelsFetching=!1})).addCase(W.pending,(function(e){e.isContactsFetching=!0})).addCase(W.fulfilled,(function(e,t){e.isContactsFetching=!1,e.contacts=[].concat(Object(S.a)(e.contacts),Object(S.a)(t.payload.data.items)),e.contactsLastPortion+=1,e.contactsTotal=t.payload.data.total})).addCase(W.rejected,(function(e,t){var n;e.contactsFetchingError=null!==(n=t.payload)&&void 0!==n?n:null,e.isContactsFetching=!1}))}}),_=A.actions,D=_.addChannel,B=_.userChanged,G=_.userChannelsChanged,Y=_.userContactsChanged,J=_.updateSucceedChanged,K=_.updatingErrorChanged,Q=_.channelsFetchingErrorChanged,X=_.addUserContact,Z=_.removeUserContact,$=A.reducer,ee=function(e){return T.get("channel/".concat(e))},te=function(e){return T.post("channel",Object(I.a)({},e))},ne=function(e){return T.put("channel/".concat(e.id),Object(I.a)({},e))},re=function(e){var t=e.id,n=e.page,r=e.count;return T.get("channel/".concat(t,"/posts?page=").concat(n,"&count=").concat(r))},ae=Object(V.b)("channel/fetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,a=n.dispatch,c=n.getState,s=c(),e.prev=2,e.next=5,ee(t);case 5:if(!(i=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",r(i.data.errors[0]));case 8:return a(ie({id:t,page:s.channel.lastPortion+1,count:s.channel.count})),e.abrupt("return",i.data);case 12:if(e.prev=12,e.t0=e.catch(2),!(l=e.t0).response||404!==l.response.status){e.next=17;break}return e.abrupt("return",r(l.response.data.errors[0]));case 17:return e.abrupt("return",r(null!==(o=null===(u=l.response)||void 0===u?void 0:u.statusText)&&void 0!==o?o:"Some error occured"));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()),ce=Object(V.b)("channel/created",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l,d;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,a=n.rejectWithValue,c=n.getState,s=c(),i=s.auth.id,e.prev=3,e.next=6,te(t);case 6:if(!(o=e.sent).data.errors[0]){e.next=9;break}return e.abrupt("return",a(o.data.errors[0]));case 9:if(i){e.next=11;break}return e.abrupt("return",a("No creatorId provided"));case 11:if(!o.data.data.id){e.next=17;break}return r(de()),r(D({id:o.data.data.id,name:t.name,photo:t.photo})),e.abrupt("return",o.data);case 17:return e.abrupt("return",a("Unable to create channel"));case 18:e.next=26;break;case 20:if(e.prev=20,e.t0=e.catch(3),!(d=e.t0).response||401!==d.response.status){e.next=25;break}return e.abrupt("return",a(d.response.data.errors[0]));case 25:return e.abrupt("return",a(null!==(u=null===(l=d.response)||void 0===l?void 0:l.statusText)&&void 0!==u?u:"Some error occured"));case 26:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t,n){return e.apply(this,arguments)}}()),se=Object(V.b)("channel/edited",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,a=n.rejectWithValue,e.prev=1,e.next=4,ne(t);case 4:if(!(c=e.sent).data.errors[0]){e.next=7;break}return e.abrupt("return",a(c.data.errors[0]));case 7:return r(he()),e.abrupt("return",t);case 11:if(e.prev=11,e.t0=e.catch(1),o=e.t0,u=[401,404],!o.response||!u.includes(o.response.status)){e.next=17;break}return e.abrupt("return",a(o.response.data.errors[0]));case 17:return e.abrupt("return",a(null!==(s=null===(i=o.response)||void 0===i?void 0:i.statusText)&&void 0!==s?s:"Some error occured"));case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(V.b)("channel/postsFetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.page,c=t.count,s=n.rejectWithValue,e.prev=2,e.next=5,re({id:r,page:a,count:c});case 5:if(!(i=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",s(i.data.errors[0]));case 8:return e.abrupt("return",i.data);case 11:return e.prev=11,e.t0=e.catch(2),l=e.t0,e.abrupt("return",s(null!==(o=null===(u=l.response)||void 0===u?void 0:u.statusText)&&void 0!==o?o:"Some error occured"));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),oe=Object(V.c)({name:"channel",initialState:{channel:null,posts:null,totalPosts:null,count:10,lastPortion:0,isPostFetching:!1,postFetchingError:null,isCreatorOpened:!1,isCreating:!1,creationError:null,createdSucceed:!1,isEditorOpened:!1,isEditing:!1,editingError:null,editedSucceed:!1,isFetching:!1,fetchingError:null},reducers:{creatorOpened:function(e){e.isCreatorOpened=!0},creatorClosed:function(e){e.isCreatorOpened=!1},editorOpened:function(e){e.isEditorOpened=!0},editorClosed:function(e){e.isEditorOpened=!1},creationErrorChanged:function(e,t){e.creationError=t.payload},createdSucceedChanged:function(e,t){e.createdSucceed=t.payload},editedSucceedChanged:function(e,t){e.editedSucceed=t.payload},editingErrorChanged:function(e,t){e.editingError=t.payload},postsChanged:function(e,t){e.posts=t.payload},totalPostsChanged:function(e,t){e.totalPosts=t.payload},lastPortionChanged:function(e,t){e.lastPortion=t.payload},postAdded:function(e,t){e.posts?e.posts.push(t.payload):e.posts=[t.payload]}},extraReducers:function(e){e.addCase(ae.pending,(function(e){e.isFetching=!0})).addCase(ae.fulfilled,(function(e,t){e.isFetching=!1,e.channel=t.payload.data,e.fetchingError=null})).addCase(ae.rejected,(function(e,t){var n;e.channel=null,e.isFetching=!1,e.fetchingError=null!==(n=t.payload)&&void 0!==n?n:null})).addCase(ce.pending,(function(e){e.isCreating=!0})).addCase(ce.fulfilled,(function(e,t){e.isCreating=!1,e.createdSucceed=!0})).addCase(ce.rejected,(function(e,t){var n;e.isCreating=!1,e.creationError=null!==(n=t.payload)&&void 0!==n?n:null})).addCase(se.pending,(function(e){e.isEditing=!0})).addCase(se.fulfilled,(function(e,t){e.isEditing=!1,e.editedSucceed=!0,e.channel=t.payload})).addCase(se.rejected,(function(e,t){var n;e.isEditing=!1,e.editingError=null!==(n=t.payload)&&void 0!==n?n:null})).addCase(ie.pending,(function(e){e.isPostFetching=!0})).addCase(ie.fulfilled,(function(e,t){e.posts?e.posts=[].concat(Object(S.a)(t.payload.data.items),Object(S.a)(e.posts)):e.posts=t.payload.data.items,e.lastPortion+=1,e.totalPosts=t.payload.data.total,e.isPostFetching=!1})).addCase(ie.rejected,(function(e,t){var n;e.isPostFetching=!1,e.editingError=null!==(n=t.payload)&&void 0!==n?n:null}))}}),ue=oe.actions,le=ue.creatorOpened,de=ue.creatorClosed,pe=ue.editorOpened,he=ue.editorClosed,fe=ue.creationErrorChanged,je=ue.createdSucceedChanged,be=ue.editedSucceedChanged,ge=ue.postsChanged,xe=ue.postAdded,Oe=ue.lastPortionChanged,me=ue.totalPostsChanged,ve=ue.editingErrorChanged,Ce=oe.reducer,ye=n(137),Ee=n(214),we=function(){var e=Object(r.useRef)(null),t=p(),n=Object(u.h)(),a=h((function(e){return e.user.channels})),c=h((function(e){return e.user.channelsTotal})),s=h((function(e){return e.user.channelsCount})),i=h((function(e){return e.user.channelsFetchingError}));j(i,Q);var o=h((function(e){return e.user.channelsLastPortion})),l=Object(r.useCallback)((function(){t(M({count:s,portion:o+1}))}),[s,t,o]);Object(r.useEffect)((function(){!e.current||a.length>=(null!==c&&void 0!==c?c:0)||a.length&&e.current.scrollHeight===e.current.clientHeight&&l()}),[a.length,l,c]);return Object(v.jsxs)("aside",{id:"scrollableChannels",ref:e,className:"flex flex-col items-center bg-gray-100 overflow-y-auto",children:[Object(v.jsx)(w,{Icon:g.a,onClick:function(){return n("/search")}}),Object(v.jsx)(w,{Icon:x.a,onClick:function(){t(le())}}),Object(v.jsx)(ye.a,{dataLength:a.length||s*o,next:l,hasMore:(null!==c&&void 0!==c?c:0)>a.length,loader:Object(v.jsx)("div",{className:"w-full h-24 flex items-center justify-center",children:Object(v.jsx)(Ee.a,{})}),scrollableTarget:"scrollableChannels",children:a.map((function(e){return Object(v.jsx)(y,{channel:e},e.id)})).reverse()})]})},Se=n(15),Ie=n(108),ke=n(429),Fe=n(431),Ne=function(e){return T.post("contact/".concat(e))},Pe=function(e){return T.delete("contact/".concat(e))},Te=function(e){var t=e.contact,n=e.count,r=e.page,a=e.query;return T.get("search?query=".concat(a,"&count=").concat(n,"&page=").concat(r,"&contact=").concat(t))},Ue=Object(V.b)("search/usersFetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Te(t);case 4:if(!(a=e.sent).data.errors[0]){e.next=7;break}return e.abrupt("return",r(a.data.errors[0]));case 7:return e.abrupt("return",a.data);case 10:if(e.prev=10,e.t0=e.catch(1),!(i=e.t0).response||401!==i.response.status){e.next=15;break}return e.abrupt("return",r(i.response.data.errors[0]));case 15:return e.abrupt("return",r(null!==(c=null===(s=i.response)||void 0===s?void 0:s.statusText)&&void 0!==c?c:"Some error occured"));case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),qe=Object(V.c)({name:"search",initialState:{users:[],isUsersFetching:!1,fetchingError:null,query:"",page:1,count:10,total:null,contact:"0"},reducers:{userChanged:function(e,t){e.users=e.users.map((function(e){return e.id===t.payload.id?t.payload:e}))},queryChanged:function(e,t){e.query=t.payload},pageChanged:function(e,t){e.page=t.payload},contactChanged:function(e,t){e.contact=t.payload},countChanged:function(e,t){e.count=t.payload},fetchingErrorChanged:function(e,t){e.fetchingError=t.payload}},extraReducers:function(e){return e.addCase(Ue.pending,(function(e){e.isUsersFetching=!0})).addCase(Ue.fulfilled,(function(e,t){e.isUsersFetching=!1,e.users=t.payload.data.items,e.total=t.payload.data.total})).addCase(Ue.rejected,(function(e,t){var n;e.isUsersFetching=!1,e.fetchingError=null!==(n=t.payload)&&void 0!==n?n:null}))}}),Re=qe.actions,He=Re.contactChanged,Ve=Re.countChanged,ze=Re.pageChanged,Le=Re.queryChanged,Me=Re.userChanged,We=Re.fetchingErrorChanged,Ae=qe.reducer,_e=Object(V.b)("contact/added",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=n.dispatch,c=n.rejectWithValue,s=r(),e.prev=2,e.next=5,Ne(t);case 5:if(!(i=e.sent).data.errors.length){e.next=8;break}return e.abrupt("return",c(i.data.errors[0]));case 8:if(!(o=s.search.users.find((function(e){return e.id===t})))){e.next=14;break}return u=Object(I.a)(Object(I.a)({},o),{},{isContact:!0}),a(Me(u)),a(X(u)),e.abrupt("return",u);case 14:return e.abrupt("return",c("User not found"));case 17:if(e.prev=17,e.t0=e.catch(2),!(l=e.t0).response||!l.response.statusText){e.next=22;break}return e.abrupt("return",c(l.response.statusText));case 22:return e.abrupt("return",c("Some error occured"));case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,n){return e.apply(this,arguments)}}()),De=Object(V.b)("contact/removed",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=n.dispatch,c=n.rejectWithValue,s=r(),e.prev=2,e.next=5,Pe(t);case 5:if(!(i=e.sent).data.errors.length){e.next=8;break}return e.abrupt("return",c(i.data.errors[0]));case 8:if(!(o=s.search.users.find((function(e){return e.id===t})))){e.next=14;break}return u=Object(I.a)(Object(I.a)({},o),{},{isContact:!1}),a(Z(o.id)),a(Me(u)),e.abrupt("return",u);case 14:return e.abrupt("return",c("User not found"));case 17:if(e.prev=17,e.t0=e.catch(2),!(l=e.t0).response||!l.response.statusText){e.next=22;break}return e.abrupt("return",c(l.response.statusText));case 22:return e.abrupt("return",c("Some error occured"));case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,n){return e.apply(this,arguments)}}()),Be=Object(V.c)({name:"contact",initialState:{contactsInProcess:[],addingError:null,removingError:null},reducers:{addingErrorChanged:function(e,t){e.addingError=t.payload},removingErrorChanged:function(e,t){e.removingError=t.payload}},extraReducers:function(e){return e.addCase(_e.pending,(function(e,t){e.contactsInProcess.push(t.meta.arg)})).addCase(_e.fulfilled,(function(e,t){e.contactsInProcess=e.contactsInProcess.filter((function(e){return e!==t.meta.arg}))})).addCase(_e.rejected,(function(e,t){var n;e.contactsInProcess=e.contactsInProcess.filter((function(e){return e!==t.meta.arg})),e.addingError=null!==(n=t.error.message)&&void 0!==n?n:null})).addCase(De.pending,(function(e,t){e.contactsInProcess.push(t.meta.arg)})).addCase(De.fulfilled,(function(e,t){e.contactsInProcess=e.contactsInProcess.filter((function(e){return e!==t.meta.arg}))})).addCase(De.rejected,(function(e,t){var n;e.contactsInProcess=e.contactsInProcess.filter((function(e){return e!==t.meta.arg})),e.removingError=null!==(n=t.error.message)&&void 0!==n?n:null}))}}),Ge=Be.actions,Ye=Ge.addingErrorChanged,Je=Ge.removingErrorChanged,Ke=Be.reducer,Qe=function(){var e=Object(r.useRef)(null),t=h((function(e){return e.user.contacts})),n=h((function(e){return e.user.contactsTotal})),a=h((function(e){return e.user.contactsCount})),c=h((function(e){return e.user.contactsLastPortion})),s=h((function(e){return e.contact.addingError})),i=h((function(e){return e.contact.removingError}));j(s,Ye),j(i,Je);var l=Object(u.h)(),d=Object(u.i)().contactId,p=Object(o.b)(),f=Object(r.useCallback)((function(){p(W({count:a,portion:c+1}))}),[c,a,p]);return Object(r.useEffect)((function(){!e.current||t.length>=(null!==n&&void 0!==n?n:0)||t.length&&e.current.scrollHeight===e.current.clientHeight&&f()}),[t,n,f]),Object(v.jsx)("aside",{className:"flex-none w-56 border-l-2 p-2 overflow-auto ".concat(!t.length&&"flex items-center"),id:"scrollableContacts",ref:e,children:Object(v.jsx)(Se.b,{renderEmpty:function(){return Object(v.jsx)(Ie.a,{image:Ie.a.PRESENTED_IMAGE_SIMPLE,description:"\u0412\u0438 \u043f\u043e\u043a\u0438 \u0449\u043e \u043d\u0435 \u043c\u0430\u0454\u0442\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432"})},children:Object(v.jsx)(ye.a,{dataLength:a*c,next:f,hasMore:(null!==n&&void 0!==n?n:0)>t.length,loader:Object(v.jsx)("div",{className:"w-full h-14 flex items-center justify-center",children:Object(v.jsx)(Ee.a,{})}),scrollableTarget:"scrollableContacts",children:Object(v.jsx)(ke.b,{className:"w-full h-full",itemLayout:"horizontal",dataSource:Object(S.a)(t).reverse(),renderItem:function(e){return Object(v.jsx)(ke.b.Item,{className:d&&+d===e.id?"bg-blue-100 rounded-md cursor-pointer p-2":"cursor-pointer p-2",onClick:function(){return l("direct/".concat(e.id))},children:Object(v.jsx)(ke.b.Item.Meta,{avatar:Object(v.jsx)(m.a,{src:e.photo,icon:Object(v.jsx)(Fe.a,{}),size:"large"}),title:Object(v.jsx)("p",{className:"truncate",children:e.name}),description:Object(v.jsxs)("p",{className:"truncate",children:["student"===e.status&&"\u0421\u0442\u0443\u0434\u0435\u043d\u0442 \u0433\u0440\u0443\u043f\u0438 ".concat(e.group," \u043a\u0430\u0444\u0435\u0434\u0440\u0438 ").concat(e.department),"instructor"===e.status&&"\u0412\u0438\u043a\u043b\u0430\u0434\u0430\u0447 \u043a\u0430\u0444\u0435\u0434\u0440\u0438 ".concat(e.department)]})})})}})})})})},Xe=n(117),Ze=n(424),$e=n(425),et=n(421),tt=n(427),nt=n(423),rt=n(432),at=Xe.a.Option,ct=function(){var e=h((function(e){return e.channel.isCreatorOpened})),t=h((function(e){return e.channel.isCreating})),n=h((function(e){return e.channel.createdSucceed})),a=h((function(e){return e.channel.creationError})),c=h((function(e){return e.user.contacts})),s=h((function(e){return e.user.contactsTotal})),i=h((function(e){return e.user.isContactsFetching})),o=h((function(e){return e.user.contactsCount})),u=h((function(e){return e.user.contactsLastPortion})),d=f(null),g=d.img,x=d.setImg,O=d.dummyRequest,C=d.beforeUpload,y=d.handleChange,E=Ze.a.useForm(),w=Object(l.a)(E,1)[0],S=p();j(a,fe),b("\u041a\u0430\u043d\u0430\u043b \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e",n,je),Object(r.useEffect)((function(){e&&(w.resetFields(),x(null))}),[w,e,x]);return Object(v.jsx)($e.a,{title:"\u0421\u0442\u0432\u043e\u0440\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u043a\u0430\u043d\u0430\u043b",centered:!0,visible:e,onOk:function(){w.submit()},onCancel:function(){S(de())},okButtonProps:{loading:t},cancelButtonProps:{disabled:t},width:800,children:Object(v.jsxs)("div",{className:"flex gap-5",children:[Object(v.jsx)(et.a,{name:"channel",showUploadList:!1,beforeUpload:C,customRequest:O,onChange:y,children:Object(v.jsx)(m.a,{size:200,shape:"square",src:g,icon:Object(v.jsx)(rt.a,{})})}),Object(v.jsxs)(Ze.a,{form:w,name:"createChannel",onFinish:function(e){S(ce(Object(I.a)(Object(I.a)({},e),{},{photo:g})))},className:"flex-grow",children:[Object(v.jsx)(Ze.a.Item,{name:"name",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u0430\u043d\u0430\u043b\u0443",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043a\u0430\u043d\u0430\u043b\u0443"})}),Object(v.jsx)(Ze.a.Item,{name:"description",initialValue:null,children:Object(v.jsx)(tt.a,{placeholder:"\u041e\u043f\u0438\u0441 \u043a\u0430\u043d\u0430\u043b\u0443 (\u043d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u043e)"})}),Object(v.jsx)(Ze.a.Item,{name:"members",initialValue:[],children:Object(v.jsx)(Xe.a,{mode:"multiple",style:{width:"100%"},placeholder:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0443\u0447\u0430\u0441\u043d\u0438\u043a\u0456\u0432 \u0437\u0456 \u0441\u0432\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432",onPopupScroll:function(e){var t=e.currentTarget;t.scrollHeight-t.scrollTop-t.clientHeight<50&&!i&&o*u<(null!==s&&void 0!==s?s:0)&&S(W({count:o,portion:u+1}))},dropdownRender:function(e){return Object(v.jsxs)("div",{children:[e,i&&Object(v.jsx)("div",{className:"flex justify-center",children:Object(v.jsx)(Ee.a,{})})]})},children:c.map((function(e){return Object(v.jsx)(at,{value:e.login,children:Object(v.jsxs)(nt.a.Text,{children:[e.login," "]})},e.id)}))})})]})]})})},st=Xe.a.Option,it=function(){var e=h((function(e){return e.user.user})),t=h((function(e){return e.user.contacts})),n=h((function(e){return e.channel.channel})),a=h((function(e){return e.channel.isEditorOpened})),c=h((function(e){return e.channel.isEditing})),s=h((function(e){return e.channel.editingError})),i=h((function(e){return e.channel.editedSucceed})),o=h((function(e){return e.user.contactsTotal})),u=h((function(e){return e.user.isContactsFetching})),d=h((function(e){return e.user.contactsCount})),g=h((function(e){return e.user.contactsLastPortion})),x=f(n?n.photo:null),O=x.img,C=x.setImg,y=x.dummyRequest,E=x.beforeUpload,w=x.handleChange,S=Ze.a.useForm(),k=Object(l.a)(S,1)[0],F=p();j(s,ve),b("\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044e \u0437\u043c\u0456\u043d\u0435\u043d\u043e",i,be),Object(r.useEffect)((function(){a&&(k.resetFields(),C(n?n.photo:null))}),[a,k,C,n]);return Object(v.jsx)($e.a,{title:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0443",centered:!0,visible:a,onOk:function(){k.submit()},onCancel:function(){F(he())},okButtonProps:{loading:c},cancelButtonProps:{disabled:c},width:800,children:Object(v.jsxs)("div",{className:"flex gap-5",children:[Object(v.jsx)(et.a,{name:"channel",showUploadList:!1,beforeUpload:E,customRequest:y,onChange:w,children:Object(v.jsx)(m.a,{size:200,shape:"square",src:O,icon:Object(v.jsx)(rt.a,{})})}),Object(v.jsxs)(Ze.a,{form:k,name:"editChannel",onFinish:function(e){n&&F(se(Object(I.a)(Object(I.a)(Object(I.a)({},n),e),{},{photo:O})))},className:"flex-grow",children:[Object(v.jsx)(Ze.a.Item,{name:"name",initialValue:n?n.name:"",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u0430\u043d\u0430\u043b\u0443",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043a\u0430\u043d\u0430\u043b\u0443"})}),Object(v.jsx)(Ze.a.Item,{name:"description",initialValue:n?n.description:"",children:Object(v.jsx)(tt.a,{placeholder:"\u041e\u043f\u0438\u0441 \u043a\u0430\u043d\u0430\u043b\u0443 (\u043d\u0435 \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u043e)"})}),Object(v.jsx)(Ze.a.Item,{name:"members",initialValue:null===n||void 0===n?void 0:n.members.filter((function(t){return t!==(null===e||void 0===e?void 0:e.login)})),children:Object(v.jsx)(Xe.a,{mode:"multiple",style:{width:"100%"},placeholder:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0443\u0447\u0430\u0441\u043d\u0438\u043a\u0456\u0432 \u0437\u0456 \u0441\u0432\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432",onPopupScroll:function(e){var t=e.currentTarget;t.scrollHeight-t.scrollTop-t.clientHeight<50&&!u&&d*g<(null!==o&&void 0!==o?o:0)&&F(W({count:d,portion:g+1}))},dropdownRender:function(e){return Object(v.jsxs)("div",{children:[e,u&&Object(v.jsx)("div",{className:"flex justify-center",children:Object(v.jsx)(Ee.a,{})})]})},children:t.map((function(e){return Object(v.jsx)(st,{value:e.login,children:Object(v.jsxs)(nt.a.Text,{children:[e.login," "]})},e.id)}))})})]})]})})},ot=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(we,{}),Object(v.jsxs)("main",{className:"flex justify-center items-center flex-grow bg-white p-6",children:[Object(v.jsx)(ct,{}),Object(v.jsx)(it,{}),Object(v.jsx)(u.b,{})]}),Object(v.jsx)(Qe,{})]})},ut=n(422),lt=n(428),dt=function(e){return T.post("posts",Object(I.a)({},e))},pt=Object(V.b)("post/sended",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l,d,p,h,f,j,b;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState,c=n.dispatch,s=n.rejectWithValue,i=a(),o=null===(r=i.channel.channel)||void 0===r?void 0:r.id,u=i.user.user,e.prev=4,!o){e.next=12;break}return l={text:t,channelId:o},e.next=9,dt(l);case 9:return d=e.sent,c(xe(Object(I.a)(Object(I.a)({id:d.data.data.id},l),{},{author:u}))),e.abrupt("return",d.data);case 12:return e.abrupt("return",s("There is no channel id provided"));case 15:if(e.prev=15,e.t0=e.catch(4),h=e.t0,f=[401,404],!(null===(p=h.response)||void 0===p?void 0:p.status)||!f.includes(h.response.status)){e.next=23;break}return e.abrupt("return",s(h.response.data.errors[0]));case 23:return e.abrupt("return",s(null!==(j=null===(b=h.response)||void 0===b?void 0:b.statusText)&&void 0!==j?j:"Some error occured"));case 24:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}()),ht=Object(V.c)({name:"post",initialState:{post:null,isSending:!1,sendingError:null},reducers:{sendingErrorChanged:function(e,t){e.sendingError=t.payload}},extraReducers:function(e){return e.addCase(pt.pending,(function(e){e.isSending=!0,e.sendingError=null})).addCase(pt.fulfilled,(function(e){e.isSending=!1})).addCase(pt.rejected,(function(e,t){var n;e.isSending=!1,e.sendingError=null!==(n=t.error.message)&&void 0!==n?n:null}))}}),ft=ht.actions.sendingErrorChanged,jt=ht.reducer,bt=function(){var e,t=Object(r.useState)(0),n=Object(l.a)(t,2),a=n[0],c=n[1],s=h((function(e){return e.channel.posts})),i=h((function(e){return e.channel.totalPosts})),o=h((function(e){return e.channel.channel})),u=h((function(e){return e.channel.lastPortion})),d=h((function(e){return e.channel.count})),f=h((function(e){return e.channel.isPostFetching})),b=h((function(e){return e.message.sendingError})),g=Object(r.useRef)(null),x=p();j(b,ft);return Object(r.useEffect)((function(){g.current&&g.current.scrollHeight>g.current.clientHeight&&0===g.current.scrollTop&&g.current.scrollTo({top:g.current.scrollHeight+g.current.clientHeight-a})}),[null===(e=g.current)||void 0===e?void 0:e.scrollHeight,a]),Object(r.useEffect)((function(){g.current&&g.current.scrollHeight-g.current.scrollTop-g.current.clientHeight<100&&g.current.scrollTo({top:g.current.scrollHeight})})),Object(v.jsx)("div",{ref:g,className:"flex-grow h-3/4 overflow-y-scroll",onScroll:function(){o&&((null!==i&&void 0!==i?i:0)<=u*d||g.current&&g.current.scrollTop<120&&!f&&(c(g.current.scrollHeight-g.current.scrollTop-g.current.clientHeight),x(ie({id:o.id,count:d,page:u+1}))))},children:Object(v.jsx)(Se.b,{renderEmpty:function(){return Object(v.jsx)(Ie.a,{image:Ie.a.PRESENTED_IMAGE_SIMPLE,description:Object(v.jsxs)("span",{children:["\u041a\u0430\u043d\u0430\u043b \u043d\u0430\u0440\u0430\u0437\u0456 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439.",Object(v.jsx)("br",{})," \u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0438\u043c!"]})})},children:Object(v.jsx)(ke.b,{className:"".concat(!(null===s||void 0===s?void 0:s.length)&&"flex justify-center items-center"),loading:f,dataSource:null!==s&&void 0!==s?s:void 0,renderItem:function(e){return Object(v.jsx)(ke.b.Item,{className:"bg-white rounded-sm mb-2",children:Object(v.jsx)(ke.b.Item.Meta,{avatar:Object(v.jsx)(m.a,{size:"large",icon:Object(v.jsx)(Fe.a,{}),src:e.author.photo}),title:e.author.name,description:e.text})},e.id)}})})})},gt=tt.a.TextArea,xt=function(){var e=p(),t=Ze.a.useForm(),n=Object(l.a)(t,1)[0];return Object(v.jsx)("div",{className:"w-full",children:Object(v.jsx)(Ze.a,{name:"post",form:n,onFinish:function(t){n.resetFields(),t.text.trim()&&e(pt(t.text))},children:Object(v.jsx)(Ze.a.Item,{name:"text",noStyle:!0,children:Object(v.jsx)(gt,{autoFocus:!0,placeholder:"Enter your message here...",autoSize:{maxRows:6,minRows:1},onPressEnter:function(e){e.shiftKey||(e.preventDefault(),n.submit())}})})})})},Ot=function(){var e=h((function(e){return e.auth.id})),t=h((function(e){return e.channel.channel})),n=h((function(e){return e.channel.isFetching})),a=h((function(e){return e.channel.fetchingError})),c=h((function(e){return e.channel.postFetchingError})),s=p(),i=Object(u.i)();Object(r.useEffect)((function(){!i.channelId||null!==t&&+i.channelId===t.id||(s(ge(null)),s(me(null)),s(Oe(0)),s(ae(+i.channelId)))}),[i.channelId,t,s]);return!t||a||n?Object(v.jsxs)(ut.a,{className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"hidden",height:"100%"},children:[n&&!a&&Object(v.jsx)(Ee.a,{}),(a||c)&&Object(v.jsx)(lt.a,{status:"warning",title:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0443",subTitle:a,extra:Object(v.jsx)(E.a,{type:"primary",onClick:function(){i.channelId&&s(ae(+i.channelId))},loading:n,children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437"})})]}):Object(v.jsxs)(ut.a,{title:t.name,extra:t.creatorId===e&&Object(v.jsx)(nt.a.Link,{onClick:function(){s(pe())},children:"Edit"}),className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%"},children:[Object(v.jsx)(bt,{}),Object(v.jsx)(xt,{})]})},mt=function(e){var t=e.id,n=e.page,r=e.count;return T.get("direct/".concat(t,"?page=").concat(n,"&count=").concat(r))},vt=Object(V.b)("direct/contactFetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,a=n.dispatch,c=n.getState,s=c(),e.prev=2,e.next=5,U(t);case 5:if(!(i=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",r(i.data.errors[0]));case 8:return a(Ct({id:t,page:s.direct.lastPortion+1,count:s.direct.count})),e.abrupt("return",i.data);case 12:if(e.prev=12,e.t0=e.catch(2),!(l=e.t0).response||401!==l.response.status){e.next=17;break}return e.abrupt("return",r(l.response.data.errors[0]));case 17:return e.abrupt("return",r(null!==(o=null===(u=l.response)||void 0===u?void 0:u.statusText)&&void 0!==o?o:"Some error occured"));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Ct=Object(V.b)("direct/messagesFetched",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.page,c=t.count,s=n.rejectWithValue,e.prev=2,e.next=5,mt({id:r,page:a,count:c});case 5:if(!(i=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",s(i.data.errors[0]));case 8:return e.abrupt("return",i.data);case 11:if(e.prev=11,e.t0=e.catch(2),!(l=e.t0).response||401!==l.response.status){e.next=16;break}return e.abrupt("return",s(l.response.data.errors[0]));case 16:return e.abrupt("return",s(null!==(o=null===(u=l.response)||void 0===u?void 0:u.statusText)&&void 0!==o?o:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),yt=Object(V.c)({name:"direct",initialState:{contact:null,messages:[],total:null,lastPortion:0,count:7,isMessagesFetching:!1,messagesFetchingError:null,isContactFetching:!1,contactFetchingError:null},reducers:{messageAdded:function(e,t){e.messages?e.messages.push(t.payload):e.messages=[t.payload]},messagesChanged:function(e,t){e.messages=t.payload},messageslastPortionChanged:function(e,t){e.lastPortion=t.payload}},extraReducers:function(e){return e.addCase(vt.pending,(function(e){e.isContactFetching=!0})).addCase(vt.fulfilled,(function(e,t){e.isContactFetching=!1,e.contact=t.payload.data})).addCase(vt.rejected,(function(e,t){var n;e.isContactFetching=!1,e.contactFetchingError=null!==(n=t.payload)&&void 0!==n?n:null})).addCase(Ct.pending,(function(e){e.isMessagesFetching=!0})).addCase(Ct.fulfilled,(function(e,t){e.isMessagesFetching=!1,e.messages?e.messages=[].concat(Object(S.a)(t.payload.data.items),Object(S.a)(e.messages)):e.messages=t.payload.data.items,e.lastPortion=e.lastPortion+1,e.total=t.payload.data.total})).addCase(Ct.rejected,(function(e,t){var n;e.isMessagesFetching=!1,e.messagesFetchingError=null!==(n=t.payload)&&void 0!==n?n:null}))}}),Et=yt.actions,wt=Et.messageAdded,St=Et.messagesChanged,It=Et.messageslastPortionChanged,kt=yt.reducer,Ft=function(){var e,t=Object(r.useRef)(null),n=Object(r.useState)(0),a=Object(l.a)(n,2),c=a[0],s=a[1],i=h((function(e){return e.direct.contact})),u=h((function(e){return e.direct.lastPortion})),d=h((function(e){return e.direct.count})),p=h((function(e){return e.direct.total})),f=h((function(e){return e.direct.messages})),b=h((function(e){return e.direct.isMessagesFetching})),g=h((function(e){return e.message.sendingError})),x=h((function(e){return e.user.user}));j(g,We);var O=Object(o.b)();return Object(r.useEffect)((function(){t.current&&t.current.scrollHeight>t.current.clientHeight&&0===t.current.scrollTop&&t.current.scrollTo({top:t.current.scrollHeight+t.current.clientHeight-c})}),[null===(e=t.current)||void 0===e?void 0:e.scrollHeight,c]),Object(r.useEffect)((function(){t.current&&t.current.scrollHeight-t.current.scrollTop-t.current.clientHeight<100&&t.current.scrollTo({top:t.current.scrollHeight})})),Object(v.jsx)("div",{ref:t,id:"ScrollableMessages",className:"flex-grow h-3/4 overflow-y-scroll",onScroll:function(){i&&((null!==p&&void 0!==p?p:0)<=u*d||t.current&&t.current.scrollTop<120&&!b&&(s(t.current.scrollHeight-t.current.scrollTop-t.current.clientHeight),O(Ct({id:i.id,count:d,page:u+1}))))},children:Object(v.jsx)(Se.b,{renderEmpty:function(){return Object(v.jsx)(Ie.a,{image:Ie.a.PRESENTED_IMAGE_SIMPLE,description:Object(v.jsxs)("span",{children:["\u0414\u0438\u0440\u0435\u043a\u0442 \u043d\u0430\u0440\u0430\u0437\u0456 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439.",Object(v.jsx)("br",{})," \u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0438\u043c!"]})})},children:Object(v.jsx)(ke.b,{className:"".concat(!(null===f||void 0===f?void 0:f.length)&&"flex justify-center items-center"),dataSource:f||void 0,loading:b,renderItem:function(e){return Object(v.jsxs)(ke.b.Item,{className:"bg-white rounded-sm mb-2",children:[e.authorId===(null===i||void 0===i?void 0:i.id)&&Object(v.jsx)(ke.b.Item.Meta,{avatar:Object(v.jsx)(m.a,{size:"large",icon:Object(v.jsx)(Fe.a,{}),src:i.photo}),title:i.name,description:e.text}),e.authorId===(null===x||void 0===x?void 0:x.id)&&Object(v.jsx)(ke.b.Item.Meta,{avatar:Object(v.jsx)(m.a,{size:"large",icon:Object(v.jsx)(Fe.a,{}),src:x.photo}),title:x.name,description:e.text})]},e.id)}})})})},Nt=function(e){return T.post("message",e)},Pt=Object(V.b)("message/sended",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u,l,d,p,h,f,j;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState,c=n.dispatch,s=n.rejectWithValue,i=a(),o=null===(r=i.direct.contact)||void 0===r?void 0:r.id,u=i.auth.id,e.prev=4,!o||!u){e.next=11;break}return e.next=8,Nt({receiverId:o,authorId:u,text:t});case 8:return l=e.sent,c(wt({id:l.data.data.id,text:t,authorId:u,receiverId:o})),e.abrupt("return",l.data);case 11:return e.abrupt("return",s("There is no user id provided"));case 14:if(e.prev=14,e.t0=e.catch(4),p=e.t0,h=[401],!(null===(d=p.response)||void 0===d?void 0:d.status)||!h.includes(p.response.status)){e.next=22;break}return e.abrupt("return",s(p.response.data.errors[0]));case 22:return e.abrupt("return",s(null!==(f=null===(j=p.response)||void 0===j?void 0:j.statusText)&&void 0!==f?f:"Some error occured"));case 23:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,n){return e.apply(this,arguments)}}()),Tt=Object(V.c)({name:"message",initialState:{message:null,isSending:!1,sendingError:null},reducers:{sendingErrorChanged:function(e,t){e.sendingError=t.payload}},extraReducers:function(e){return e.addCase(Pt.pending,(function(e){e.isSending=!0,e.sendingError=null})).addCase(Pt.fulfilled,(function(e){e.isSending=!1})).addCase(Pt.rejected,(function(e,t){var n;e.isSending=!1,e.sendingError=null!==(n=t.error.message)&&void 0!==n?n:null}))}}),Ut=(Tt.actions.sendingErrorChanged,Tt.reducer),qt=tt.a.TextArea,Rt=function(){var e=p(),t=Ze.a.useForm(),n=Object(l.a)(t,1)[0];return Object(v.jsx)("div",{className:"w-full",children:Object(v.jsx)(Ze.a,{name:"message",form:n,onFinish:function(t){n.resetFields(),t.text.trim()&&e(Pt(t.text))},children:Object(v.jsx)(Ze.a.Item,{name:"text",noStyle:!0,children:Object(v.jsx)(qt,{autoFocus:!0,placeholder:"Enter your message here...",autoSize:{maxRows:6,minRows:1},onPressEnter:function(e){e.shiftKey||(e.preventDefault(),n.submit())}})})})})},Ht=function(){var e=h((function(e){return e.direct.contact})),t=h((function(e){return e.direct.isContactFetching})),n=h((function(e){return e.direct.contactFetchingError})),a=h((function(e){return e.direct.messagesFetchingError})),c=p(),s=Object(u.i)();Object(r.useEffect)((function(){!s.contactId||null!==e&&+s.contactId===e.id||(c(St(null)),c(It(0)),c(vt(+s.contactId)))}),[s.contactId,c,e]);return!e||n||t?Object(v.jsxs)(ut.a,{className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"hidden",height:"100%"},children:[t&&!n&&Object(v.jsx)(Ee.a,{}),(n||a)&&Object(v.jsx)(lt.a,{status:"warning",title:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f",subTitle:n,extra:Object(v.jsx)(E.a,{type:"primary",onClick:function(){s.channelId&&c(vt(+s.channelId))},loading:t,children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437"})})]}):Object(v.jsxs)(ut.a,{title:Object(v.jsxs)("div",{className:"flex gap-2 items-center",children:[Object(v.jsx)(m.a,{src:e.photo,icon:Object(v.jsx)(Fe.a,{}),size:"large"}),Object(v.jsx)("p",{children:e.name})]}),extra:Object(v.jsx)(nt.a.Link,{children:"Edit"}),className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%"},children:[Object(v.jsx)(Ft,{}),Object(v.jsx)(Rt,{})]})},Vt=nt.a.Paragraph,zt=function(){var e=p();return Object(v.jsx)(Ie.a,{className:"",description:Object(v.jsxs)("div",{children:[Object(v.jsx)(Vt,{strong:!0,children:"\u041f\u043e\u0447\u043d\u0456\u0442\u044c \u0441\u0432\u043e\u044e \u0440\u043e\u0431\u043e\u0442\u0443 \u0437\u0456 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u044f \u043a\u0430\u043d\u0430\u043b\u0443"}),Object(v.jsx)(E.a,{type:"primary",onClick:function(){e(le())},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043a\u0430\u043d\u0430\u043b"})]})})},Lt=n.p+"static/media/logo.da23b606.png",Mt=function(){return Object(v.jsx)("div",{className:"flex justify-center items-center flex-none w-18 p-1",children:Object(v.jsx)(i.b,{to:"/",children:Object(v.jsx)("img",{src:Lt,alt:"kpi logo",className:"w-14"})})})},Wt=function(){return Object(v.jsx)("div",{className:"flex-grow p-1"})},At=n(218),_t=n.n(At),Dt=function(){var e=h((function(e){return e.user.user}));return Object(v.jsx)("div",{className:"flex items-center gap-2 flex-none w-56 py-1 pl-1 pr-4",children:e&&Object(v.jsx)(i.b,{to:"/settings",children:Object(v.jsxs)("div",{className:"flex flex-grow items-center gap-2 overflow-hidden group",children:[Object(v.jsx)(m.a,{size:48,icon:Object(v.jsx)(Fe.a,{}),src:e.photo,className:"flex-none"}),Object(v.jsx)(_t.a,{strong:!0,className:"text-base truncate group-hover:text-blue-400",children:e.login})]})})})},Bt=function(){return Object(v.jsxs)("header",{className:"flex items-center border-b-2 bg-gray-100",children:[Object(v.jsx)(Mt,{}),Object(v.jsx)(Wt,{}),Object(v.jsx)(Dt,{})]})},Gt=function(){return Object(v.jsx)("div",{className:"h-screen flex justify-center items-center",children:Object(v.jsx)(Ee.a,{size:"large",tip:Object(v.jsx)("span",{className:"text-lg",children:"Loading app . . ."})})})},Yt=Object(V.b)("app/init",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,a=n.getState,c=a(),e.next=4,Promise.all([r(z(t)).unwrap(),r(M({portion:1,count:c.user.channelsCount})).unwrap(),r(W({count:c.user.contactsCount,portion:1})).unwrap()]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Jt=Object(V.c)({name:"app",initialState:{isInit:!1,isIniting:!1,error:null},reducers:{initChanged:function(e,t){e.isInit=t.payload},initErrorChanged:function(e,t){e.error=t.payload}},extraReducers:function(e){e.addCase(Yt.pending,(function(e){e.isIniting=!0})).addCase(Yt.fulfilled,(function(e){e.isIniting=!1,e.isInit=!0,e.error=null})).addCase(Yt.rejected,(function(e,t){var n;e.isIniting=!1,e.isInit=!1,e.error=null!==(n=t.error.message)&&void 0!==n?n:null}))}}),Kt=Jt.actions,Qt=(Kt.initChanged,Kt.initErrorChanged,Jt.reducer),Xt=function(){return T.get("session")},Zt=function(e){var t=e.login,n=e.password;return T.post("session",{login:t,password:n})},$t=function(e){return T.post("user",Object(I.a)({},e))},en=function(){return T.delete("session")},tn=Object(V.b)("auth/authorized",Object(N.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),nn=Object(V.b)("auth/signed_in",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.login,a=t.password,c=n.rejectWithValue,e.prev=2,e.next=5,Zt({login:r,password:a});case 5:if(!(s=e.sent).data.errors[0]){e.next=8;break}return e.abrupt("return",c(s.data.errors[0]));case 8:return e.abrupt("return",s.data);case 11:if(e.prev=11,e.t0=e.catch(2),!(u=e.t0).response||401!==u.response.status){e.next=16;break}return e.abrupt("return",c(u.response.data.errors[0]));case 16:return e.abrupt("return",c(null!==(i=null===(o=u.response)||void 0===o?void 0:o.statusText)&&void 0!==i?i:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),rn=Object(V.b)("auth/signed_up",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a,c,s,i,o,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,$t(t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),s=e.t0,i=[400,404,409],!(null===(c=s.response)||void 0===c?void 0:c.status)||!i.includes(s.response.status)){e.next=16;break}return e.abrupt("return",r(s.response.data.errors[0]));case 16:return e.abrupt("return",r(null!==(o=null===(u=s.response)||void 0===u?void 0:u.statusText)&&void 0!==o?o:"Some error occured"));case 17:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),an=Object(V.b)("auth/signed_out",function(){var e=Object(N.a)(F.a.mark((function e(t,n){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,e.next=3,en();case 3:return(a=e.sent).data.errors.length||(r(B(null)),r(G([])),r(Y([]))),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),cn=Object(V.c)({name:"auth",initialState:{id:null,isAuthorizing:!0,authError:null,isSigningIn:!1,signingInError:null,isSigningUp:!1,signingUpError:null,isSigningOut:!1,signingOutError:null},reducers:{signingInErrorChanged:function(e,t){e.signingInError=t.payload},signingUpErrorChanged:function(e,t){e.signingUpError=t.payload},signingOutErrorChanged:function(e,t){e.signingOutError=t.payload}},extraReducers:function(e){e.addCase(tn.pending,(function(e){e.isAuthorizing=!0,e.id=null})).addCase(tn.fulfilled,(function(e,t){e.isAuthorizing=!1,e.authError=null,!t.payload.errors.length&&t.payload.data.id&&(e.id=t.payload.data.id)})).addCase(tn.rejected,(function(e,t){var n;e.authError=null!==(n=t.error.message)&&void 0!==n?n:null,e.isAuthorizing=!1})).addCase(nn.pending,(function(e){e.isSigningIn=!0})).addCase(nn.fulfilled,(function(e,t){e.isSigningIn=!1,t.payload.data.id&&(e.id=t.payload.data.id)})).addCase(nn.rejected,(function(e,t){var n;e.signingInError=null!==(n=t.payload)&&void 0!==n?n:null,e.isSigningIn=!1})).addCase(rn.pending,(function(e){e.isSigningUp=!0})).addCase(rn.fulfilled,(function(e,t){e.isSigningUp=!1,!t.payload.errors.length&&t.payload.data.id&&(e.id=t.payload.data.id)})).addCase(rn.rejected,(function(e,t){var n;e.signingUpError=null!==(n=t.payload)&&void 0!==n?n:null,e.isSigningUp=!1})).addCase(an.pending,(function(e){e.isSigningOut=!0})).addCase(an.fulfilled,(function(e){e.isSigningOut=!1,e.id=null})).addCase(an.rejected,(function(e,t){var n;e.signingOutError=null!==(n=t.error.message)&&void 0!==n?n:null,e.isSigningOut=!1}))}}),sn=cn.actions,on=sn.signingInErrorChanged,un=sn.signingUpErrorChanged,ln=sn.signingOutErrorChanged,dn=cn.reducer,pn=function(e){var t=e.error,n=e.loading,r=p(),a=h((function(e){return e.auth.id}));return Object(v.jsx)("div",{className:"h-screen w-screen flex justify-center items-center",children:Object(v.jsx)(lt.a,{status:"warning",title:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u043e\u0434\u0430\u0442\u043a\u0443",subTitle:t,extra:Object(v.jsx)(E.a,{type:"primary",onClick:function(){r(a?Yt(a):tn())},loading:n,children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437"})})})},hn=function(){var e=Object(u.h)();return Object(v.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:Object(v.jsx)(lt.a,{status:"404",title:"404",subTitle:"\u0412\u0438\u0431\u0430\u0447\u0442\u0435, \u0442\u0430\u043a\u043e\u0457 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \u043d\u0435 \u0456\u0441\u043d\u0443\u0454",extra:Object(v.jsx)(E.a,{type:"primary",onClick:function(){e("/")},children:"\u041d\u0430 \u0433\u043e\u043b\u043e\u0432\u043d\u0443"})})})},fn=n(220),jn=n(430),bn=n(219),gn=Xe.a.Option,xn=function(e){var t=e.onSubmit,n=h((function(e){return e.search.query})),a=h((function(e){return e.search.contact})),c=h((function(e){return e.search.isUsersFetching})),s=Object(bn.useForm)(),i=Object(l.a)(s,1)[0];return Object(r.useEffect)((function(){i.resetFields()}),[i,n,a]),Object(v.jsxs)(Ze.a,{name:"search",form:i,onFinish:t,children:[Object(v.jsx)(Ze.a.Item,{name:"query",initialValue:null!==n&&void 0!==n?n:"",children:Object(v.jsx)(tt.a,{placeholder:"\u041f\u043e\u0448\u0443\u043a..."})}),Object(v.jsxs)(jn.b,{size:"middle",className:"mb-6",children:[Object(v.jsx)(Ze.a.Item,{name:"contact",initialValue:String(a),noStyle:!0,children:Object(v.jsxs)(Xe.a,{style:{width:150},children:[Object(v.jsx)(gn,{value:"0",children:"\u0412\u0441\u0456"}),Object(v.jsx)(gn,{value:"1",children:"\u0422\u0456\u043b\u044c\u043a\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"}),Object(v.jsx)(gn,{value:"2",children:"\u0422\u0456\u043b\u044c\u043a\u0438 \u043d\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]})}),Object(v.jsx)(E.a,{type:"primary",htmlType:"submit",loading:c,children:"\u0428\u0443\u043a\u0430\u0442\u0438"})]})]})},On=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],c=h((function(e){return e.search.users})),s=h((function(e){return e.search.query})),i=h((function(e){return e.search.count})),o=h((function(e){return e.search.contact})),u=h((function(e){return e.search.page})),d=h((function(e){return e.search.isUsersFetching})),f=h((function(e){return e.contact.contactsInProcess})),j=p();return Object(r.useEffect)((function(){n?a(!1):j(Ue({query:s,count:i,contact:o,page:u}))}),[s,i,o,u,j,n]),Object(v.jsx)(ut.a,{className:"w-full h-3/4 flex-grow mb-6",bodyStyle:{display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%"},children:Object(v.jsx)(Se.b,{renderEmpty:function(){return Object(v.jsx)(Ie.a,{image:Ie.a.PRESENTED_IMAGE_SIMPLE,description:Object(v.jsx)("span",{children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0456"})})},children:Object(v.jsx)(ke.b,{className:"overflow-y-scroll h-full ".concat(!c.length&&"flex justify-center items-center"),dataSource:c,loading:d,renderItem:function(e){return Object(v.jsx)(ke.b.Item,{actions:null===e.isContact?[]:[!0===e.isContact?Object(v.jsx)(E.a,{loading:f.includes(e.id),danger:!0,onClick:function(){return j(De(e.id))},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432"}):Object(v.jsx)(E.a,{loading:f.includes(e.id),onClick:function(){return j(_e(e.id))},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0443 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})],children:Object(v.jsx)(ke.b.Item.Meta,{avatar:Object(v.jsx)(m.a,{src:e.photo,icon:Object(v.jsx)(Fe.a,{})}),title:e.name,description:Object(v.jsxs)("div",{children:["student"===e.status&&"\u0421\u0442\u0443\u0434\u0435\u043d\u0442 \u0433\u0440\u0443\u043f\u0438 ".concat(e.group," \u043a\u0430\u0444\u0435\u0434\u0440\u0438 ").concat(e.department),"instructor"===e.status&&"\u0412\u0438\u043a\u043b\u0430\u0434\u0430\u0447 \u043a\u0430\u0444\u0435\u0434\u0440\u0438 ".concat(e.department)]})})})}})})})},mn=function(){var e=Object(i.c)(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=h((function(e){return e.search.total})),s=h((function(e){return e.search.query})),o=h((function(e){return e.search.contact})),u=h((function(e){return e.search.page})),d=h((function(e){return e.search.count})),f=h((function(e){return e.search.isUsersFetching})),b=h((function(e){return e.search.fetchingError}));j(b,We);var g=p(),x=n.get("query"),O=n.get("contact"),m=n.get("page"),C=n.get("count");Object(r.useEffect)((function(){g(Le(x||"")),O&&["0","1","2"].includes(O)&&g(He(O)),!isNaN(Number(m))&&Number(m)>0&&g(ze(Number(m))),!isNaN(Number(C))&&Number(C)>0&&g(Ve(Number(C)))}),[O,C,g,m,x]);return Object(v.jsxs)("section",{className:"w-full h-full flex flex-col",children:[Object(v.jsx)(xn,{onSubmit:function(e){e.query?n.set("query",e.query):n.delete("query"),n.set("contact",e.contact),n.set("page","1"),n.set("count",String(d)),a(n)}}),Object(v.jsx)(On,{}),Object(v.jsx)(fn.a,{disabled:f,current:u,total:null!==c&&void 0!==c?c:0,pageSize:d,showSizeChanger:!0,pageSizeOptions:["5","10","20"],onChange:function(e,t){s?n.set("query",s):n.delete("query"),n.set("contact",o),u!==e?n.set("page",String(e)):d!==t&&n.set("page","1"),n.set("count",String(t)),a(n)},className:"self-center"})]})},vn=function(){var e,t=h((function(e){return e.user.user})),n=h((function(e){return e.user.isUpdating})),r=h((function(e){return e.user.updateSucceed})),a=h((function(e){return e.user.updatingError})),c=h((function(e){return e.auth.signingOutError}));j(c,ln),j(a,K),b("\u0417\u043c\u0456\u043d\u0438 \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0430\u043d\u0456",r,J);var s=Object(o.b)(),i=f(null!==(e=null===t||void 0===t?void 0:t.photo)&&void 0!==e?e:null),u=i.img,l=i.handleChange,d=i.beforeUpload,p=i.dummyRequest;return Object(v.jsxs)("div",{className:"flex gap-5 ml-auto mr-auto self-center",children:[Object(v.jsx)("div",{children:Object(v.jsx)(et.a,{name:"avatar",showUploadList:!1,beforeUpload:d,customRequest:p,onChange:l,children:Object(v.jsx)(m.a,{size:200,shape:"square",src:u,icon:Object(v.jsx)(Fe.a,{})})})}),Object(v.jsx)("div",{className:"w-96",children:Object(v.jsxs)(Ze.a,{name:"settings",onFinish:function(e){s(L(Object(I.a)(Object(I.a)({},e),{},{photo:u})))},children:[Object(v.jsx)(Ze.a.Item,{name:"name",initialValue:null===t||void 0===t?void 0:t.name,rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0432\u043e\u0454 \u0456\u043c'\u044f",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u041f.\u0406.\u0411."})}),Object(v.jsx)(Ze.a.Item,{name:"department",initialValue:null===t||void 0===t?void 0:t.department,rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0432\u0430\u0448\u043e\u0457 \u043a\u0430\u0444\u0435\u0434\u0440\u0438",whitespace:!0}],children:Object(v.jsx)(tt.a,{value:null===t||void 0===t?void 0:t.department,placeholder:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0444\u0435\u0434\u0440\u0430"})}),"student"===(null===t||void 0===t?void 0:t.status)&&Object(v.jsx)(Ze.a.Item,{name:"group",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0432\u0430\u0448\u043e\u0457 \u0433\u0440\u0443\u043f\u0438",whitespace:!0}],initialValue:t.group,children:Object(v.jsx)(tt.a,{placeholder:"\u0412\u0430\u0448\u0430 \u0433\u0440\u0443\u043f\u0430"})}),Object(v.jsx)(Ze.a.Item,{children:Object(v.jsxs)(jn.b,{children:[Object(v.jsx)(E.a,{type:"primary",htmlType:"submit",loading:n,children:"\u0417\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"}),Object(v.jsx)(E.a,{onClick:function(){return s(an())},children:"\u0412\u0438\u0439\u0442\u0438 \u0437 \u0430\u043a\u0430\u0443\u043d\u0442\u0443"})]})})]})})]})},Cn=function(){var e=h((function(e){return e.auth.id})),t=Object(u.h)();Object(r.useEffect)((function(){e&&t("/")}),[e,t])},yn=function(){var e=h((function(e){return e.auth.isSigningIn})),t=h((function(e){return e.auth.signingInError})),n=p();Cn(),j(t,on);return Object(v.jsx)("div",{className:"w-96 ml-auto mr-auto self-center",children:Object(v.jsxs)(Ze.a,{name:"login",onFinish:function(e){n(nn(e))},children:[Object(v.jsx)(Ze.a.Item,{name:"login",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u041b\u043e\u0433\u0456\u043d"})}),Object(v.jsx)(Ze.a.Item,{name:"password",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",whitespace:!0}],children:Object(v.jsx)(tt.a.Password,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(v.jsxs)(Ze.a.Item,{children:[Object(v.jsx)(E.a,{type:"primary",htmlType:"submit",loading:e,children:"\u0412\u0456\u0439\u0442\u0438"}),Object(v.jsx)(i.b,{to:"/sign-up",children:Object(v.jsx)("div",{className:"inline-block text-blue-500 py-1 px-3 hover:text-blue-400 focus:text-blue-400",children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"})})]})]})})},En=Xe.a.Option,wn=function(){var e=h((function(e){return e.auth.isSigningUp})),t=h((function(e){return e.auth.signingUpError})),n=p();j(t,un);var a=Object(r.useState)(null),c=Object(l.a)(a,2),s=c[0],o=c[1];Cn();return Object(v.jsx)("div",{className:"w-96 ml-auto mr-auto self-center",children:Object(v.jsxs)(Ze.a,{name:"registration",onFinish:function(e){n(rn(e))},children:[Object(v.jsx)(Ze.a.Item,{name:"login",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d",whitespace:!0},{min:4,message:"\u041b\u043e\u0433\u0456\u043d \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u0431\u0443\u0442\u0438 \u043d\u0435 \u043a\u043e\u0440\u043e\u0442\u0448\u0435 \u0437\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0438"}],children:Object(v.jsx)(tt.a,{placeholder:"\u041b\u043e\u0433\u0456\u043d"})}),Object(v.jsx)(Ze.a.Item,{name:"password",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",whitespace:!0},{min:6,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u0431\u0443\u0442\u0438 \u043d\u0435 \u043a\u043e\u0440\u043e\u0442\u0448\u0435 \u0437\u0430 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432"}],children:Object(v.jsx)(tt.a.Password,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(v.jsx)(Ze.a.Item,{name:"name",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0441\u0432\u043e\u0454 \u0456\u043c'\u044f",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u041f.\u0406.\u0411."})}),Object(v.jsx)(Ze.a.Item,{name:"status",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u0441\u0432\u0456\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"}],children:Object(v.jsxs)(Xe.a,{placeholder:"\u0412\u0430\u0448 \u0441\u0442\u0430\u0442\u0443\u0441",onChange:function(e){o(e)},children:[Object(v.jsx)(En,{value:"student",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(v.jsx)(En,{value:"instructor",children:"\u0412\u0438\u043a\u043b\u0430\u0434\u0430\u0447"})]})}),Object(v.jsx)(Ze.a.Item,{name:"department",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0412\u0430\u0448\u043e\u0457 \u043a\u0430\u0444\u0435\u0434\u0440\u0438",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0444\u0435\u0434\u0440\u0430"})}),"student"===s&&Object(v.jsx)(Ze.a.Item,{name:"group",rules:[{required:!0,message:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0412\u0430\u0448\u043e\u0457 \u0433\u0440\u0443\u043f\u0438",whitespace:!0}],children:Object(v.jsx)(tt.a,{placeholder:"\u0412\u0430\u0448\u0430 \u0433\u0440\u0443\u043f\u0430"})}),Object(v.jsxs)(Ze.a.Item,{children:[Object(v.jsx)(E.a,{type:"primary",htmlType:"submit",loading:e,children:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"}),Object(v.jsx)(i.b,{to:"/sign-in",children:Object(v.jsx)("div",{className:"inline-block text-blue-500 py-1 px-3 hover:text-blue-400 focus:text-blue-400",children:"\u0412\u0445\u0456\u0434"})})]})]})})},Sn=function(e){var t=e.children;return h((function(e){return e.auth.id}))?t:Object(v.jsx)(u.a,{to:"/sign-in"})},In=function(){var e=h((function(e){return e.auth.id})),t=h((function(e){return e.app.isInit})),n=h((function(e){return e.app.isIniting})),a=h((function(e){return e.auth.isAuthorizing})),c=h((function(e){return e.app.error})),s=h((function(e){return e.auth.authError})),i=null!==c&&void 0!==c?c:s,o=n||a,l=p();return Object(r.useEffect)((function(){t||c||l(tn())}),[l,c,t]),Object(r.useEffect)((function(){e&&l(Yt(e))}),[e,l]),i?Object(v.jsx)(pn,{error:i,loading:o}):o&&!i?Object(v.jsx)(Gt,{}):Object(v.jsxs)("div",{className:"box-border h-screen flex flex-col",children:[Object(v.jsx)(Bt,{}),Object(v.jsx)("section",{className:"flex-grow flex overflow-hidden",children:Object(v.jsxs)(u.e,{children:[Object(v.jsxs)(u.c,{path:"/",element:Object(v.jsx)(ot,{}),children:[Object(v.jsx)(u.c,{index:!0,element:Object(v.jsx)(Sn,{children:Object(v.jsx)(zt,{})})}),Object(v.jsx)(u.c,{path:"/channel/:channelId",element:Object(v.jsx)(Sn,{children:Object(v.jsx)(Ot,{})})}),Object(v.jsx)(u.c,{path:"/direct/:contactId",element:Object(v.jsx)(Sn,{children:Object(v.jsx)(Ht,{})})}),Object(v.jsx)(u.c,{path:"/settings",element:Object(v.jsx)(Sn,{children:Object(v.jsx)(vn,{})})}),Object(v.jsx)(u.c,{path:"/search",element:Object(v.jsx)(Sn,{children:Object(v.jsx)(mn,{})})}),Object(v.jsx)(u.c,{path:"*",element:Object(v.jsx)(hn,{})})]}),Object(v.jsx)(u.c,{path:"/sign-in",element:Object(v.jsx)(yn,{})}),Object(v.jsx)(u.c,{path:"/sign-up",element:Object(v.jsx)(wn,{})}),Object(v.jsx)(u.c,{path:"*",element:Object(v.jsx)(hn,{})})]})})]})},kn=Object(V.a)({reducer:{auth:dn,user:$,channel:Ce,post:jt,app:Qt,search:Ae,contact:Ke,direct:kt,message:Ut}});s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(o.a,{store:kn,children:Object(v.jsx)(i.a,{children:Object(v.jsx)(In,{})})})}),document.getElementById("root"))}},[[420,1,2]]]);
//# sourceMappingURL=main.d91d44f7.chunk.js.map